# 伞兵模拟系统 (Paratrooper Simulation)

一个基于 Next.js 和 Canvas 的军事伞兵作战模拟系统，实现了复杂的队伍编队、跟随机制和间距控制。

## 🚀 功能特点

### 核心模拟机制
- **双状态系统**：物理状态（降落中/已着陆）+ 作战状态（等待/头兵/跟随/单独行动）
- **动态组队**：伞兵着陆后自动寻找队友，最早着陆者成为头兵
- **智能跟随**：跟随者保持与头兵合适距离，超出范围会脱离队伍
- **间距控制**：伞兵之间自动保持最小距离，避免拥挤
- **头兵保护**：头兵享有个人空间，不受间距力影响，能自由带领队伍

### 视觉效果
- **状态颜色**：不同作战状态用不同颜色表示
  - 🟢 绿色：头兵（较大+深绿边框）
  - 🔵 蓝色：跟随者
  - 🟣 紫色：等待组队
  - 🟠 橙色：单独行动
- **形状多样**：支持圆形、三角形、方形伞兵
- **队伍连线**：可视化团队关系
- **实时统计**：显示各状态伞兵数量和队伍信息

### 参数配置
- **A**：伞兵数量（>100）
- **Z**：相遇距离阈值（队伍管理范围）
- **z**：最小间距（防拥挤距离）
- **V_a**：最大速度
- 支持实时调整参数并重新模拟

## 🛠️ 技术架构

- **前端框架**：Next.js 14 + TypeScript
- **渲染引擎**：HTML5 Canvas + requestAnimationFrame
- **状态管理**：React Hooks
- **样式框架**：Tailwind CSS
- **物理引擎**：自研距离计算和碰撞检测

## 📦 安装运行

```bash
# 克隆项目
git clone https://github.com/zylshuai/paratrooper.git
cd paratrooper

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 打开浏览器访问
http://localhost:3000
```

## 🎮 使用方法

1. **调整参数**：使用左侧控制面板调整伞兵数量、距离阈值等参数
2. **开始模拟**：点击"开始模拟"按钮启动
3. **观察行为**：
   - 伞兵随机时间降落（半透明状态）
   - 着陆后等待2秒寻找队友（紫色）
   - 组队成功后头兵变绿色，跟随者变蓝色
   - 超时未组队的伞兵变橙色单独行动
4. **实时控制**：可随时暂停、重置或调整参数

## 📋 模拟规则

1. 伞兵随机时间降落到矩形区域内
2. 着陆后等待2秒寻找距离小于Z的队友
3. 最早着陆的伞兵成为头兵，其他加入队伍
4. 跟随者保持与头兵z到Z的距离，超出Z会脱离
5. 所有伞兵保持最小间距z，避免拥挤
6. 头兵享有"个人空间"，不受间距力影响
7. 等待超时的伞兵开始单独行动
8. 速度限制：最小速度不低于最大速度的50%

## 🔧 项目结构

```
paratrooper/
├── app/
│   └── page.tsx           # 主页面组件
├── lib/
│   └── ParatrooperSimulation.ts  # 核心模拟引擎
├── types/
│   └── paratrooper.ts     # 类型定义
├── package.json           # 项目配置
└── README.md             # 项目说明
```

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来完善这个项目！

## 📄 许可证

MIT License

---

**Made with ❤️ using Next.js and Canvas**
